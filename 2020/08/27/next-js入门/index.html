<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>next.js入门 | 王美的个人博客</title><meta name="description" content="Next.js简介Next.js 是一个轻量级的 React 服务端渲染应用框架。   目前Next.js是React服务端渲染的最佳解决方案，所以如果想使用React来开发需要SEO的应用，基本上就要使用Next.js。 创建next.js项目1npm install -g create-next-app   目前可以支持三种方式的创建，分别是用npx,yarn和create-next-app命"><meta name="keywords" content="react,Next.js"><meta name="author" content="王美"><meta name="copyright" content="王美"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://hard-workingrookie.github.io/2020/08/27/next-js%E5%85%A5%E9%97%A8/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="next.js入门"><meta property="og:url" content="https://hard-workingrookie.github.io/2020/08/27/next-js%E5%85%A5%E9%97%A8/"><meta property="og:site_name" content="王美的个人博客"><meta property="og:description" content="Next.js简介Next.js 是一个轻量级的 React 服务端渲染应用框架。   目前Next.js是React服务端渲染的最佳解决方案，所以如果想使用React来开发需要SEO的应用，基本上就要使用Next.js。 创建next.js项目1npm install -g create-next-app   目前可以支持三种方式的创建，分别是用npx,yarn和create-next-app命"><meta property="og:image" content="https://static.oschina.net/uploads/space/2016/1125/144806_W1dc_2720166.png"><meta property="article:published_time" content="2020-08-27T12:02:21.000Z"><meta property="article:modified_time" content="2020-08-28T05:52:41.153Z"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.1.1',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime: '',
  last_push_date: {"zeroDay":"今天","suffix":"天前"},
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
      const now = new Date()
      const expiryDay = ttl * 86400000
      const item = {
        value: value,
        expiry: now.getTime() + expiryDay,
      }
      localStorage.setItem(key, JSON.stringify(item))
    },
  
  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-08-28 13:52:41'
}</script><noscript><style type="text/css">
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var autoChangeMode = 'false'
var t = saveToLocal.get('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (saveToLocal.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="王美的个人博客" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">12</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">14</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/Share/"><i class="fa-fw fas fa-heart"></i><span> Share</span></a></div><div class="menus_item"><a class="site-page" href="/Diary/"><i class="fa-fw fas fa-paint-brush"></i><span> Diary</span></a></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-info"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Next-js%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">Next.js简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAnext-js%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.</span> <span class="toc-text">创建next.js项目</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Next-js%E7%9A%84Page%E5%92%8CComponent%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">Next.js的Page和Component的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E9%A1%B5%E9%9D%A2%E5%92%8C%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84"><span class="toc-number">3.1.</span> <span class="toc-text">新建页面和访问路径</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Component%E7%BB%84%E4%BB%B6%E7%9A%84%E5%88%B6%E4%BD%9C"><span class="toc-number">3.2.</span> <span class="toc-text">Component组件的制作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1-%E5%9F%BA%E7%A1%80%E5%92%8C%E5%9F%BA%E6%9C%AC%E8%B7%B3%E8%BD%AC"><span class="toc-number">4.</span> <span class="toc-text">路由-基础和基本跳转</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">4.1.</span> <span class="toc-text">标签式导航</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Router%E6%A8%A1%E5%9D%97%E8%BF%9B%E8%A1%8C%E8%B7%B3%E8%BD%AC"><span class="toc-number">4.2.</span> <span class="toc-text">Router模块进行跳转</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1-%E8%B7%B3%E8%BD%AC%E6%97%B6%E7%94%A8query%E4%BC%A0%E9%80%92%E5%92%8C%E6%8E%A5%E5%8F%97%E5%8F%82%E6%95%B0"><span class="toc-number">5.</span> <span class="toc-text">路由-跳转时用query传递和接受参数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%AA%E8%83%BD%E7%94%A8query%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="toc-number">6.</span> <span class="toc-text">只能用query传递参数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6%E4%BC%A0%E9%80%92%E8%BF%87%E6%9D%A5%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">6.1.</span> <span class="toc-text">接收传递过来的参数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E8%B7%B3%E8%BD%AC%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="toc-number">7.</span> <span class="toc-text">编程式跳转传递参数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1-%E5%85%AD%E4%B8%AA%E9%92%A9%E5%AD%90%E4%BA%8B%E4%BB%B6%E7%9A%84%E8%AE%B2%E8%A7%A3"><span class="toc-number">8.</span> <span class="toc-text">路由-六个钩子事件的讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#routerChangeStart%E8%B7%AF%E7%94%B1%E5%8F%91%E7%94%9F%E5%8F%98%E5%8C%96%E6%97%B6"><span class="toc-number">8.1.</span> <span class="toc-text">routerChangeStart路由发生变化时</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#routerChangeComplete%E8%B7%AF%E7%94%B1%E7%BB%93%E6%9D%9F%E5%8F%98%E5%8C%96%E6%97%B6"><span class="toc-number">8.2.</span> <span class="toc-text">routerChangeComplete路由结束变化时</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#beforeHistoryChange%E6%B5%8F%E8%A7%88%E5%99%A8history%E8%A7%A6%E5%8F%91%E5%89%8D"><span class="toc-number">8.3.</span> <span class="toc-text">beforeHistoryChange浏览器history触发前</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AC%E5%8F%98%E6%88%90hash%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F"><span class="toc-number">8.4.</span> <span class="toc-text">转变成hash路由模式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9C%A8getInitialProps%E4%B8%AD%E7%94%A8Axios%E8%8E%B7%E5%8F%96%E8%BF%9C%E7%AB%AF%E6%95%B0%E6%8D%AE"><span class="toc-number">9.</span> <span class="toc-text">在getInitialProps中用Axios获取远端数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%92%8C%E5%BC%95%E5%85%A5Axios%E6%8F%92%E4%BB%B6"><span class="toc-number">9.1.</span> <span class="toc-text">安装和引入Axios插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#getInitialProps%E4%B8%AD%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">9.2.</span> <span class="toc-text">getInitialProps中获取数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Style-JSX%E7%BC%96%E5%86%99%E9%A1%B5%E9%9D%A2%E7%9A%84CSS%E6%A0%B7%E5%BC%8F"><span class="toc-number">10.</span> <span class="toc-text">使用Style JSX编写页面的CSS样式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E8%AF%86Style-JSX%E8%AF%AD%E6%B3%95-%E6%8A%8A%E5%AD%97%E4%BD%93%E8%AE%BE%E6%88%90%E8%93%9D%E8%89%B2"><span class="toc-number">10.1.</span> <span class="toc-text">初识Style JSX语法 把字体设成蓝色</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E5%8A%A0%E9%9A%8F%E6%9C%BA%E7%B1%BB%E5%90%8D-%E4%B8%8D%E4%BC%9A%E6%B1%A1%E6%9F%93%E5%85%A8%E5%B1%80CSS"><span class="toc-number">10.2.</span> <span class="toc-text">自动加随机类名 不会污染全局CSS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E6%98%BE%E7%A4%BA%E6%A0%B7%E5%BC%8F"><span class="toc-number">10.3.</span> <span class="toc-text">动态显示样式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Lazy-Loading%E5%AE%9E%E7%8E%B0%E6%A8%A1%E5%9D%97%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="toc-number">11.</span> <span class="toc-text">Lazy Loading实现模块懒加载</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%87%92%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9D%97"><span class="toc-number">11.1.</span> <span class="toc-text">懒加载模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%87%92%E5%8A%A0%E8%BD%BD%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-number">11.2.</span> <span class="toc-text">懒加载自定义组件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89Head-%E6%9B%B4%E5%8A%A0%E5%8F%8B%E5%A5%BD%E7%9A%84SEO%E6%93%8D%E4%BD%9C"><span class="toc-number">12.</span> <span class="toc-text">自定义Head 更加友好的SEO操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%951%EF%BC%9A%E5%9C%A8%E5%90%84%E4%B8%AA%E9%A1%B5%E9%9D%A2%E5%8A%A0%E4%B8%8A-lt-Head-gt-%E6%A0%87%E7%AD%BE"><span class="toc-number">12.1.</span> <span class="toc-text">方法1：在各个页面加上&lt;Head&gt;标签</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%952%EF%BC%9A%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E7%9A%84"><span class="toc-number">12.2.</span> <span class="toc-text">方法2：定义全局的</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#p11%EF%BC%9ANext-js%E6%A1%86%E6%9E%B6%E4%B8%8B%E4%BD%BF%E7%94%A8Ant-Design-UI"><span class="toc-number">13.</span> <span class="toc-text">p11：Next.js框架下使用Ant Design UI</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A9Next-js%E6%94%AF%E6%8C%81CSS%E6%96%87%E4%BB%B6"><span class="toc-number">13.1.</span> <span class="toc-text">让Next.js支持CSS文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BDAnt-Design"><span class="toc-number">13.2.</span> <span class="toc-text">按需加载Ant Design</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%88%E6%9D%A5%E5%AE%89%E8%A3%85Ant-Design%E5%BA%93"><span class="toc-number">13.3.</span> <span class="toc-text">** 先来安装Ant Design库 **</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEbabel-plugin-import-%E6%8F%92%E4%BB%B6"><span class="toc-number">13.4.</span> <span class="toc-text">** 安装和配置babel-plugin-import 插件 **</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Next-js%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E6%89%93%E5%8C%85%EF%BC%88%E5%AE%8C%E7%BB%93%EF%BC%89"><span class="toc-number">14.</span> <span class="toc-text">Next.js生产环境打包（完结）</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://static.oschina.net/uploads/space/2016/1125/144806_W1dc_2720166.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">王美的个人博客</a></span><span class="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/Share/"><i class="fa-fw fas fa-heart"></i><span> Share</span></a></div><div class="menus_item"><a class="site-page" href="/Diary/"><i class="fa-fw fas fa-paint-brush"></i><span> Diary</span></a></div><div class="menus_item"><a class="site-page" href="/About/"><i class="fa-fw fas fa-info"></i><span> About</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">next.js入门</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-08-27T12:02:21.000Z" title="发表于 2020-08-27 20:02:21">2020-08-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-08-28T05:52:41.153Z" title="更新于 2020-08-28 13:52:41">2020-08-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/react%E5%AD%A6%E4%B9%A0/">react学习</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="Next-js简介"><a href="#Next-js简介" class="headerlink" title="Next.js简介"></a>Next.js简介</h1><div class="note default"><p>Next.js 是一个轻量级的 React 服务端渲染应用框架。</p>
</div>

<p>目前Next.js是React服务端渲染的最佳解决方案，所以如果想使用React来开发需要SEO的应用，基本上就要使用Next.js。</p>
<h1 id="创建next-js项目"><a href="#创建next-js项目" class="headerlink" title="创建next.js项目"></a>创建next.js项目</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g create-next-app</span><br></pre></td></tr></table></figure>


<p>目前可以支持三种方式的创建，分别是用npx,yarn和create-next-app命令来进行安装，安装的结构都是完全一样的，以npx为例。</p>
<div class="note default"><p>npx 是Node自带的npm模块，所以你只要安装了Node都是可以直接使用npx命令的。</p>
</div>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-next-app next-create</span><br></pre></td></tr></table></figure>
<p>安装完成之后进入项目目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn dev</span><br></pre></td></tr></table></figure>
<p>在浏览器中输入<code>http://localhost:3000/</code>看运行效果。</p>
<h1 id="Next-js的Page和Component的使用"><a href="#Next-js的Page和Component的使用" class="headerlink" title="Next.js的Page和Component的使用"></a>Next.js的Page和Component的使用</h1><h2 id="新建页面和访问路径"><a href="#新建页面和访问路径" class="headerlink" title="新建页面和访问路径"></a>新建页面和访问路径</h2><p>直接在根目录下的pages文件夹下，新建一个litterWang.js页面。然后写入下面的代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">litterWang</span></span>()&#123;</span><br><span class="line">    <span class="built_in">return</span> (&lt;button&gt;litterWang&lt;/button&gt;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default  litterWang;</span><br></pre></td></tr></table></figure>

<p>只要写完上面的代码，Next框架就自动作好了路由，这个也算是Next的一个重要优点，给我们节省了大量的时间。</p>
<p>现在要作一个更深的页面，比如把有关博客的界面都放在这样的路径下<a target="_blank" rel="noopener" href="http://localhost:3000/blog/nextBlog,%E5%85%B6%E5%AE%9E%E5%8F%AA%E8%A6%81%E5%9C%A8pages%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E5%86%8D%E5%BB%BA%E7%AB%8B%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9blog%EF%BC%8C%E7%84%B6%E5%90%8E%E8%BF%9B%E5%85%A5blog%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%8C%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AAnextBlog.js%E6%96%87%E4%BB%B6%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E4%BA%86%E3%80%82">http://localhost:3000/blog/nextBlog,其实只要在pages文件夹下再建立一个新的文件夹blog，然后进入blog文件夹，新建一个nextBlog.js文件，就可以实现了。</a></p>
<p>nextBlog.js文件内容,我们这里就用最简单的写法了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> default ()=&gt;&lt;div&gt;nextBlog page&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>写完后，就可以直接在浏览器中访问了，是不是发现Next框架真的减轻了我们大量的工作。</p>
<h2 id="Component组件的制作"><a href="#Component组件的制作" class="headerlink" title="Component组件的制作"></a>Component组件的制作</h2><p>制作组件也同样方便，比如要建立一个litterWang组件，直接在components目录下建立一个文件litterWang.js,然后写入下面代码:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> default (&#123;children&#125;)=&gt;&lt;button&gt;&#123;children&#125;&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>组件写完后需要先引入，比如我们在Index页面里进行引入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import litterWang from <span class="string">&#x27;../components/litterWang&#x27;</span></span><br></pre></td></tr></table></figure>

<p>使用就非常简单了，直接写入标签就可以。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;litterWang&gt;按钮&lt;/litterWang&gt;</span><br></pre></td></tr></table></figure>


<h1 id="路由-基础和基本跳转"><a href="#路由-基础和基本跳转" class="headerlink" title="路由-基础和基本跳转"></a>路由-基础和基本跳转</h1><p>学会编写组件和页面后，下一步应该了解的就是路由体系，每个框架都有着不同的路由体系，这节先学习最基础的页面如何跳转。页面跳转一般有两种形式，第一种是利用标签<code>&lt;Link&gt;</code>,第二种是用js编程的方式进行跳转，也就是利用<code>Router</code>组件。先来看一下标签的形式如何跳转。</p>
<h2 id="标签式导航"><a href="#标签式导航" class="headerlink" title="标签式导航"></a>标签式导航<Link></h2><p>在编写代码之前，先删除index.js中的代码，保证代码的最小化。使用标签式导航需要先进行引入，代码如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import Link from <span class="string">&#x27;next/link&#x27;</span></span><br></pre></td></tr></table></figure>

<p>然后新建两个页面litterWangA.js和litterWangB.js，新建后写个最简单的页面，能标识出来A、B两个页面就好。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//litterWangA.js</span><br><span class="line">import Link from <span class="string">&#x27;next/link&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default ()=&gt;(</span><br><span class="line">    &lt;&gt;</span><br><span class="line">        &lt;div&gt;litterWang-A page .  &lt;/div&gt;</span><br><span class="line">        &lt;Link href=<span class="string">&quot;/&quot;</span>&gt;&lt;a&gt;返回首页&lt;/a&gt;&lt;/Link&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>写完A页面后，可以直接复制A页面的内容，然后修改一下就是B页面。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//litterWangB.js</span><br><span class="line"></span><br><span class="line">import Link from <span class="string">&#x27;next/link&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default ()=&gt;(</span><br><span class="line">    &lt;&gt;</span><br><span class="line">        &lt;div&gt;litterWang-B page .  &lt;/div&gt;</span><br><span class="line">        &lt;Link href=<span class="string">&quot;/&quot;</span>&gt;&lt;a&gt;返回首页&lt;/a&gt;&lt;/Link&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>有了两个页面后，可以编写首页的代码，实现跳转了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//index.js</span><br><span class="line">import React from <span class="string">&#x27;react&#x27;</span></span><br><span class="line">import Link from <span class="string">&#x27;next/link&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const Home = () =&gt; (</span><br><span class="line">  &lt;&gt;</span><br><span class="line">    &lt;div&gt;我是首页&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;&lt;Link href=<span class="string">&quot;/litterWangA&quot;</span>&gt;&lt;a&gt;去litterWangA页面&lt;/a&gt;&lt;/Link&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;&lt;Link href=<span class="string">&quot;/litterWangB&quot;</span>&gt;&lt;a&gt;去litterWangB页面&lt;/a&gt;&lt;/Link&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default Home</span><br></pre></td></tr></table></figure>

<p>用<code>&lt;Link&gt;</code>标签进行跳转是非常容易的，但是又一个小坑需要注意一下，就是他不支持兄弟标签并列的情况。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> &lt;div&gt;</span><br><span class="line">  &lt;Link href=<span class="string">&quot;/litterWangA&quot;</span>&gt;</span><br><span class="line">    &lt;span&gt;去litterWangA页面&lt;/span&gt;</span><br><span class="line">    &lt;span&gt;前端博客&lt;/span&gt;</span><br><span class="line">  &lt;/Link&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>如果这样写会直接报错，报错信息如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">client pings, but there&#39;s no entry for page: &#x2F;_error</span><br><span class="line">Warning: You&#39;re using a string directly inside &lt;Link&gt;. This usage has been deprecated. Please add an &lt;a&gt; tag as child of &lt;Link&gt;</span><br></pre></td></tr></table></figure>

<p>但是你可以把这两个标签外边套一个父标签，就可以了，比如下面的代码就没有错误。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link href=<span class="string">&quot;/litterWangA&quot;</span>&gt;</span><br><span class="line">  &lt;a&gt;</span><br><span class="line">    &lt;span&gt;去litterWangA页面&lt;/span&gt;</span><br><span class="line">    &lt;span&gt;前端博客&lt;/span&gt;</span><br><span class="line">  &lt;/a&gt;</span><br><span class="line">&lt;/Link&gt;</span><br></pre></td></tr></table></figure>

<p>通过标签跳转非常的简单，跟使用<code>&lt;a&gt;</code>标签几乎一样。那再来看看如何用编程的方式进行跳转。</p>
<h2 id="Router模块进行跳转"><a href="#Router模块进行跳转" class="headerlink" title="Router模块进行跳转"></a>Router模块进行跳转</h2><p>在Next框架中还可以使用Router模块进行编程式的跳转，使用前也需要我们引入Router，代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import Router from <span class="string">&#x27;next/router&#x27;</span></span><br></pre></td></tr></table></figure>

<p>然后在<code>Index.js</code>页面中加入，直接使用<code>Router</code>进行跳转就可以了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">   &lt;button onClick=&#123;()=&gt;&#123;Router.push(<span class="string">&#x27;/litterWangA&#x27;</span>)&#125;&#125;&gt;去litterWangA页面&lt;/button&gt;</span><br><span class="line"> &lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>这样写只是简单，但是还是耦合性太高，跟<code>Link</code>标签没什么区别，你可以修改一下代码，把跳转放到一个方法里，然后调用方法。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import React from <span class="string">&#x27;react&#x27;</span></span><br><span class="line">import Link from <span class="string">&#x27;next/link&#x27;</span></span><br><span class="line">import Router from <span class="string">&#x27;next/router&#x27;</span></span><br><span class="line">const Home = () =&gt; &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="function"><span class="title">gotoA</span></span>()&#123;</span><br><span class="line">    Router.push(<span class="string">&#x27;/litterWangA&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span>(</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;div&gt;我是首页&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Link href=<span class="string">&quot;/litterWangA&quot;</span>&gt;</span><br><span class="line">          &lt;a&gt;</span><br><span class="line">            &lt;span&gt;去litterWangA页面&lt;/span&gt;</span><br><span class="line">            &lt;span&gt;前端博客&lt;/span&gt;</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">        &lt;/Link&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div&gt;&lt;Link href=<span class="string">&quot;/litterWangB&quot;</span>&gt;&lt;a&gt;去litterWangB页面&lt;/a&gt;&lt;/Link&gt;&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;gotoA&#125;&gt;去litterWangA页面&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default Home</span><br></pre></td></tr></table></figure>

<p>这样也是可以实现跳转的，而且耦合性也降低了,所以个人更喜欢这种跳转方式。Next的两种跳转方式，第一种是标签式跳转，第二种是编程式跳转。</p>
<h1 id="路由-跳转时用query传递和接受参数"><a href="#路由-跳转时用query传递和接受参数" class="headerlink" title="路由-跳转时用query传递和接受参数"></a>路由-跳转时用query传递和接受参数</h1><p>项目开发中一般都不是简单的静态跳转，而是需要动态跳转的。动态跳转就是跳转时需要带一个参数或几个参数过去，然后在到达的页面接受这个传递的参数，并根据参数不同显示不同的内容。比如新闻列表，然后点击一个要看的新闻就会跳转到具体内容。这些类似这样的需求都都是通过传递参数实现的。</p>
<h1 id="只能用query传递参数"><a href="#只能用query传递参数" class="headerlink" title="只能用query传递参数"></a>只能用query传递参数</h1><p>作一个“找小哥哥”的例子，通过这个例子来通俗易懂的讲解一下路由带参数的知识。在Next.js中只能通过通过<code>query（?id=1）</code>来传递参数，而不能通过<code>(path:id)</code>的形式传递参数。</p>
<p>现在我们改写一下pages文件夹下的index.js文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import React from <span class="string">&#x27;react&#x27;</span></span><br><span class="line">import Link from <span class="string">&#x27;next/link&#x27;</span></span><br><span class="line">import Router from <span class="string">&#x27;next/router&#x27;</span></span><br><span class="line">const Home = () =&gt; &#123;</span><br><span class="line">  <span class="built_in">return</span>(</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;div&gt;我是首页&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Link href=<span class="string">&quot;/xiaogege?name=吴彦祖&quot;</span>&gt;&lt;a&gt;选吴彦祖&lt;/a&gt;&lt;/Link&gt;&lt;br/&gt;</span><br><span class="line">        &lt;Link href=<span class="string">&quot;/xiaogege?name=彭于晏&quot;</span>&gt;&lt;a&gt;选彭于晏&lt;/a&gt;&lt;/Link&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default Home</span><br></pre></td></tr></table></figure>

<p>这样编写query参数就可以进行传递过去了，接下来就是要接受参数了。</p>
<h2 id="接收传递过来的参数"><a href="#接收传递过来的参数" class="headerlink" title="接收传递过来的参数"></a>接收传递过来的参数</h2><p>现在还没有小哥哥对应的页面，所以我们要创建xiaogege.js页面，并写下下面的代码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import &#123; withRouter&#125; from <span class="string">&#x27;next/router&#x27;</span></span><br><span class="line">import Link from <span class="string">&#x27;next/link&#x27;</span></span><br><span class="line"></span><br><span class="line">const xiaogege = (&#123;router&#125;)=&gt;&#123;</span><br><span class="line">    <span class="built_in">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;div&gt;&#123;router.query.name&#125;,来为我们服务了 .&lt;/div&gt;</span><br><span class="line">            &lt;Link href=<span class="string">&quot;/&quot;</span>&gt;&lt;a&gt;返回首页&lt;/a&gt;&lt;/Link&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default withRouter(xiaogege)</span><br></pre></td></tr></table></figure>

<p><code>withRouter</code>是Next.js框架的高级组件，用来处理路由用的。通过这种方式就获得了参数，并显示在页面上了。</p>
<h1 id="编程式跳转传递参数"><a href="#编程式跳转传递参数" class="headerlink" title="编程式跳转传递参数"></a>编程式跳转传递参数</h1><p>回了<code>&lt;Link&gt;</code>这种标签式跳转传递参数的形式，那编程式跳转如何传递那，其实也可以简单使用?加参数的形式，代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> &lt;div&gt;</span><br><span class="line">  &lt;button onClick=&#123;gotoxiaogege&#125;&gt;选吴彦祖&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">// gotoxiaogege</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">gotoxiaogege</span></span>()&#123;</span><br><span class="line">    Router.push(<span class="string">&#x27;/xiaogege?name=吴彦祖&#x27;</span>)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>这种形式跳转和传递参数是完全没有问题的，但是不太优雅，所以也可以写成Object的形式。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">gotoxiaogege</span></span>()&#123;</span><br><span class="line">   Router.push(&#123;</span><br><span class="line">     pathname:<span class="string">&#x27;/xiaogege&#x27;</span>,</span><br><span class="line">     query:&#123;</span><br><span class="line">       name:<span class="string">&#x27;吴彦祖&#x27;</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>


<p>其实<code>&lt;Link&gt;</code>标签也可以写成这种形式，比如我们把第一个修改成这种形式.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link href=&#123;&#123;pathname:<span class="string">&#x27;/xiaogege&#x27;</span>,query:&#123;name:<span class="string">&#x27;彭于晏&#x27;</span>&#125;&#125;&#125;&gt;&lt;a&gt;选彭于晏&lt;/a&gt;&lt;/Link&gt;&lt;br/&gt;</span><br></pre></td></tr></table></figure>

<p>在浏览器中预览一下，如果一切正常是可以顺利进行跳转，并接收到传递的值。</p>
<h1 id="路由-六个钩子事件的讲解"><a href="#路由-六个钩子事件的讲解" class="headerlink" title="路由-六个钩子事件的讲解"></a>路由-六个钩子事件的讲解</h1><p>路由的钩子事件，也就是当路由发生变化时，可以监听到这些变化事件，执行对应的函数。它一共有六个钩子事件，这节课就学习一下。</p>
<h2 id="routerChangeStart路由发生变化时"><a href="#routerChangeStart路由发生变化时" class="headerlink" title="routerChangeStart路由发生变化时"></a>routerChangeStart路由发生变化时</h2><p>在监听路由发生变化时，我们需要用Router组件，然后用on方法来进行监听,在pages文件夹下的index.js，然后写入下面的监听事件，这里我们只打印一句话，就不作其他的事情了。代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> Router.events.on(<span class="string">&#x27;routeChangeStart&#x27;</span>,(...args)=&gt;&#123;</span><br><span class="line">  console.log(<span class="string">&#x27;1.routeChangeStart-&gt;路由开始变化,参数为:&#x27;</span>,...args)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>这个时路由发生变化时，时间第一时间被监听到，并执行了里边的方法。</p>
<h2 id="routerChangeComplete路由结束变化时"><a href="#routerChangeComplete路由结束变化时" class="headerlink" title="routerChangeComplete路由结束变化时"></a>routerChangeComplete路由结束变化时</h2><p>路由变化开始时可以监听到，那结束时也时可以监听到的，这时候监听的事件是routerChangeComplete。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Router.events.on(<span class="string">&#x27;routeChangeComplete&#x27;</span>,(...args)=&gt;&#123;</span><br><span class="line">  console.log(<span class="string">&#x27;routeChangeComplete-&gt;路由结束变化,参数为:&#x27;</span>,...args)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="beforeHistoryChange浏览器history触发前"><a href="#beforeHistoryChange浏览器history触发前" class="headerlink" title="beforeHistoryChange浏览器history触发前"></a>beforeHistoryChange浏览器history触发前</h2><p>history就是HTML中的API，如果这个不了解可以百度了解一下，Next.js路由变化默认都是通过history进行的，所以每次都会调用。 不适用history的话，也可以通过hash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  Router.events.on(<span class="string">&#x27;beforeHistoryChange&#x27;</span>,(...args)=&gt;&#123;</span><br><span class="line">    console.log(<span class="string">&#x27;3,beforeHistoryChange-&gt;在改变浏览器 history之前触发,参数为:&#x27;</span>,...args)</span><br><span class="line">  &#125;)</span><br><span class="line">routeChangeError路由跳转发生错误时</span><br><span class="line"> Router.events.on(<span class="string">&#x27;routeChangeError&#x27;</span>,(...args)=&gt;&#123;</span><br><span class="line">    console.log(<span class="string">&#x27;4,routeChangeError-&gt;跳转发生错误,参数为:&#x27;</span>,...args)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>需要注意的是404找不到路由页面不算错误，这个我们就不演示了。</p>
<h2 id="转变成hash路由模式"><a href="#转变成hash路由模式" class="headerlink" title="转变成hash路由模式"></a>转变成hash路由模式</h2><p>还有两种事件，都是针对hash的，所以现在要转变成hash模式。hash模式下的两个事件<code>hashChangeStart</code>和<code>hashChangeComplete</code>,就都在这里进行编写了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Router.events.on(<span class="string">&#x27;hashChangeStart&#x27;</span>,(...args)=&gt;&#123;</span><br><span class="line">  console.log(<span class="string">&#x27;5,hashChangeStart-&gt;hash跳转开始时执行,参数为:&#x27;</span>,...args)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">Router.events.on(<span class="string">&#x27;hashChangeComplete&#x27;</span>,(...args)=&gt;&#123;</span><br><span class="line">  console.log(<span class="string">&#x27;6,hashChangeComplete-&gt;hash跳转完成时,参数为:&#x27;</span>,...args)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在下面的jsx语法部分，再增加一个链接,使用hash来进行跳转，代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;Link href=<span class="string">&quot;#litterWang&quot;</span>&gt;&lt;a&gt;选litterWang&lt;/a&gt;&lt;/Link&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>为了方便你学习，我这里给出index.js的全部代码，你可以在练习时进行参考。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"> import React from <span class="string">&#x27;react&#x27;</span></span><br><span class="line">import Link from <span class="string">&#x27;next/link&#x27;</span></span><br><span class="line">import Router from <span class="string">&#x27;next/router&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const Home = () =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="function"><span class="title">gotoxiaogege</span></span>()&#123;</span><br><span class="line">    Router.push(&#123;</span><br><span class="line">      pathname:<span class="string">&#x27;/xiaogege&#x27;</span>,</span><br><span class="line">      query:&#123;</span><br><span class="line">        name:<span class="string">&#x27;吴彦祖&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  Router.events.on(<span class="string">&#x27;routeChangeStart&#x27;</span>,(...args)=&gt;&#123;</span><br><span class="line">    console.log(<span class="string">&#x27;1.routeChangeStart-&gt;路由开始变化,参数为:&#x27;</span>,...args)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  Router.events.on(<span class="string">&#x27;routeChangeComplete&#x27;</span>,(...args)=&gt;&#123;</span><br><span class="line">    console.log(<span class="string">&#x27;2.routeChangeComplete-&gt;路由结束变化,参数为:&#x27;</span>,...args)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  Router.events.on(<span class="string">&#x27;beforeHistoryChange&#x27;</span>,(...args)=&gt;&#123;</span><br><span class="line">    console.log(<span class="string">&#x27;3,beforeHistoryChange-&gt;在改变浏览器 history之前触发,参数为:&#x27;</span>,...args)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  Router.events.on(<span class="string">&#x27;routeChangeError&#x27;</span>,(...args)=&gt;&#123;</span><br><span class="line">    console.log(<span class="string">&#x27;4,routeChangeError-&gt;跳转发生错误,参数为:&#x27;</span>,...args)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  Router.events.on(<span class="string">&#x27;hashChangeStart&#x27;</span>,(...args)=&gt;&#123;</span><br><span class="line">    console.log(<span class="string">&#x27;5,hashChangeStart-&gt;hash跳转开始时执行,参数为:&#x27;</span>,...args)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  Router.events.on(<span class="string">&#x27;hashChangeComplete&#x27;</span>,(...args)=&gt;&#123;</span><br><span class="line">    console.log(<span class="string">&#x27;6,hashChangeComplete-&gt;hash跳转完成时,参数为:&#x27;</span>,...args)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="built_in">return</span>(</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;div&gt;我是首页&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Link href=&#123;&#123;pathname:<span class="string">&#x27;/xiaogege&#x27;</span>,query:&#123;name:<span class="string">&#x27;彭于晏&#x27;</span>&#125;&#125;&#125;&gt;&lt;a&gt;选彭于晏&lt;/a&gt;&lt;/Link&gt;&lt;br/&gt;</span><br><span class="line">        &lt;Link href=<span class="string">&quot;/xiaogege?name=吴彦祖&quot;</span>&gt;&lt;a&gt;选吴彦祖&lt;/a&gt;&lt;/Link&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;gotoxiaogege&#125;&gt;选吴彦祖&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">         &lt;Link href=<span class="string">&quot;#litterWang&quot;</span>&gt;&lt;a&gt;选litterWang&lt;/a&gt;&lt;/Link&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default Home</span><br></pre></td></tr></table></figure>

<p>这节主要学习了路由的钩子事件，利用钩子事件是可以作很多事情的，比如转换时的加载动画，关掉页面的一些资源计数器…..。</p>
<h1 id="在getInitialProps中用Axios获取远端数据"><a href="#在getInitialProps中用Axios获取远端数据" class="headerlink" title="在getInitialProps中用Axios获取远端数据"></a>在getInitialProps中用Axios获取远端数据</h1><p>在Next.js框架中提供了<code>getInitialProps</code>静态方法用来获取远端数据，这个是框架的约定，所以你也只能在这个方法里获取远端数据。不要再试图在声明周期里获得，虽然也可以在<code>ComponentDidMount</code>中获得，但是用了别人的框架，就要遵守别人的约定。</p>
<h2 id="安装和引入Axios插件"><a href="#安装和引入Axios插件" class="headerlink" title="安装和引入Axios插件"></a>安装和引入Axios插件</h2><p>Axios是目前最或的前端获取数据的插件了，也是由大神首推的数据接口请求插件.在请求前需要先安装Axios插件。</p>
<p>打开终端，直接使用yarn命令进行安装。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add axios</span><br></pre></td></tr></table></figure>

<p>安装完成后，在需要的页面中用import引入axios，代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import axios from <span class="string">&#x27;axios&#x27;</span></span><br></pre></td></tr></table></figure>

<p>引入后，就可以使用getInitialProps进行获取后端接口数据了。</p>
<h2 id="getInitialProps中获取数据"><a href="#getInitialProps中获取数据" class="headerlink" title="getInitialProps中获取数据"></a>getInitialProps中获取数据</h2><p>在<code>xiaogege.js</code>页面中使用<code>getInitialProps</code>，因为是远程获取数据，所以我们采用异步请求的方式。数据存在了Easy Mock中，地址如下：</p>
<p><a target="_blank" rel="noopener" href="https://www.easy-mock.com/mock/5cfcce489dc7c36bd6da2c99/xiaogege/getList">https://www.easy-mock.com/mock/5cfcce489dc7c36bd6da2c99/xiaogege/getList</a><br>(你可以自己作一个数据源，因为这个可能也不稳定，不过半年内应该是可以的)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">xiaogege.getInitialProps = async ()=&gt;&#123;</span><br><span class="line">    const promise =new Promise((resolve)=&gt;&#123;</span><br><span class="line">            axios(<span class="string">&#x27;https://www.easy-mock.com/mock/5cfcce489dc7c36bd6da2c99/xiaogege/getList&#x27;</span>).<span class="keyword">then</span>(</span><br><span class="line">                (res)=&gt;&#123;</span><br><span class="line">                    console.log(<span class="string">&#x27;远程数据结果：&#x27;</span>,res)</span><br><span class="line">                    resolve(res.data.data)</span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">return</span> await promise</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>获得数据后，我们需要把得到的数据传递给页面组件，用{}显示出来就可以了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const xiaogege = (&#123;router,list&#125;)=&gt;&#123;</span><br><span class="line">    <span class="built_in">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;div&gt;&#123;router.query.name&#125;,来为我们服务了 .&lt;br/&gt;&#123;list&#125;&lt;/div&gt;</span><br><span class="line">            &lt;Link href=<span class="string">&quot;/&quot;</span>&gt;&lt;a&gt;返回首页&lt;/a&gt;&lt;/Link&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样我们就利用Axios从远端获取了数据，xiaogege.js的所有代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import &#123; withRouter&#125; from &#39;next&#x2F;router&#39;</span><br><span class="line">import Link from &#39;next&#x2F;link&#39;</span><br><span class="line">import axios from &#39;axios&#39;</span><br><span class="line"></span><br><span class="line">const xiaogege &#x3D; (&#123;router,list&#125;)&#x3D;&gt;&#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;div&gt;&#123;router.query.name&#125;,来为我们服务了 .&lt;br&#x2F;&gt;&#123;list&#125;&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;Link href&#x3D;&quot;&#x2F;&quot;&gt;&lt;a&gt;返回首页&lt;&#x2F;a&gt;&lt;&#x2F;Link&gt;</span><br><span class="line">        &lt;&#x2F;&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">xiaogege.getInitialProps &#x3D; async ()&#x3D;&gt;&#123;</span><br><span class="line">    const promise &#x3D;new Promise((resolve)&#x3D;&gt;&#123;</span><br><span class="line">            axios(&#39;https:&#x2F;&#x2F;www.easy-mock.com&#x2F;mock&#x2F;5cfcce489dc7c36bd6da2c99&#x2F;xiaogege&#x2F;getList&#39;).then(</span><br><span class="line">                (res)&#x3D;&gt;&#123;</span><br><span class="line">                    console.log(&#39;远程数据结果：&#39;,res)</span><br><span class="line">                    resolve(res.data.data)</span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">    &#125;)</span><br><span class="line">    return await promise</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default withRouter(xiaogege)</span><br></pre></td></tr></table></figure>

<p>这节课主要学习了在Next.js框架下在getInitialProps方法中利用Axios来获取远端数据的的操作，这个在实际项目中是必备技能，所以需要多练习几遍。</p>
<h1 id="使用Style-JSX编写页面的CSS样式"><a href="#使用Style-JSX编写页面的CSS样式" class="headerlink" title="使用Style JSX编写页面的CSS样式"></a>使用Style JSX编写页面的CSS样式</h1><p>在Next.js中引入一个CSS样式是不可以用的，如果想用，需要作额外的配置。因为框架为我们提供了一个style jsx特性，也就是把CSS用JSX的语法写出来。如果你以前学过Vue，那这种写法你是非常熟悉的。</p>
<h2 id="初识Style-JSX语法-把字体设成蓝色"><a href="#初识Style-JSX语法-把字体设成蓝色" class="headerlink" title="初识Style JSX语法 把字体设成蓝色"></a>初识Style JSX语法 把字体设成蓝色</h2><p>在pages文件夹下，新建一个litterWang.js文件。然后写入下面的代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//litterWang.js</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">litterWang</span></span>()&#123;</span><br><span class="line">    <span class="built_in">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;div&gt;litterWang免费前端教程&lt;/div&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default litterWang</span><br></pre></td></tr></table></figure>

<p>这个是一个最简单的页面，只在层中写了一句话。这时候我们想把页面中字的颜色变成蓝色，就可以使用Style JSX语法。直接在&lt;&gt;&lt;/&gt;之间写下如下的代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;style jsx&gt;</span><br><span class="line">    &#123;&#96;</span><br><span class="line">        div&#123;color:blue;&#125;</span><br><span class="line">    &#96;&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>主要所有的css样式需要用{}进行包裹，否则就会报错。这时候你打开浏览器进行预览，字体的颜色就变成了蓝色。</p>
<h2 id="自动加随机类名-不会污染全局CSS"><a href="#自动加随机类名-不会污染全局CSS" class="headerlink" title="自动加随机类名 不会污染全局CSS"></a>自动加随机类名 不会污染全局CSS</h2><p>加入了Style jsx代码后，Next.js会自动加入一个随机类名，这样就防止了CSS的全局污染。比如我们把代码写成下面这样，然后在浏览器的控制台中进行查看，你会发现自动给我们加入了类名，类似jsx-xxxxxxxx。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">litterWang</span></span>()&#123;</span><br><span class="line">    <span class="built_in">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;div&gt;litterWang免费前端教程&lt;/div&gt;</span><br><span class="line">            &lt;div className=<span class="string">&quot;litterWang&quot;</span>&gt;litterWang免费前端教程&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;style jsx&gt;</span><br><span class="line">                &#123;`</span><br><span class="line">                    div &#123; color:blue;&#125;</span><br><span class="line">                    .litterWang &#123;color:red;&#125;</span><br><span class="line">                `&#125;</span><br><span class="line">            &lt;/style&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default litterWang</span><br></pre></td></tr></table></figure>

<h2 id="动态显示样式"><a href="#动态显示样式" class="headerlink" title="动态显示样式"></a>动态显示样式</h2><p>Next.js使用了Style jsx,所以定义动态的CSS样式就非常简单，比如现在要作一个按钮，点击一下，字体颜色就由蓝色变成了红色。下面是实现代码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;useState&#125; from <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">litterWang</span></span>()&#123;</span><br><span class="line">    //关键代码----------start-------</span><br><span class="line">    const [color,setColor] = useState(<span class="string">&#x27;blue&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    const changeColor=()=&gt;&#123;</span><br><span class="line"></span><br><span class="line">        setColor(color==<span class="string">&#x27;blue&#x27;</span>?<span class="string">&#x27;red&#x27;</span>:<span class="string">&#x27;blue&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">     //关键代码----------end-------</span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;div&gt;litterWang免费前端教程&lt;/div&gt;</span><br><span class="line">            &lt;div&gt;&lt;button onClick=&#123;changeColor&#125;&gt;改变颜色&lt;/button&gt;&lt;/div&gt;</span><br><span class="line">            &lt;style jsx&gt;</span><br><span class="line">                &#123;`</span><br><span class="line">                    div &#123; color:<span class="variable">$&#123;color&#125;</span>;&#125;</span><br><span class="line">                `&#125;</span><br><span class="line">            &lt;/style&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default litterWang</span><br></pre></td></tr></table></figure>


<h1 id="Lazy-Loading实现模块懒加载"><a href="#Lazy-Loading实现模块懒加载" class="headerlink" title="Lazy Loading实现模块懒加载"></a>Lazy Loading实现模块懒加载</h1><p>当项目越来越大的时候，模块的加载是需要管理的，如果不管理会出现首次打开过慢，页面长时间没有反应一系列问题。这时候可用Next.js提供的LazyLoading来解决这类问题。让模块和组件只有在用到的时候在进行加载，一般我把这种东西叫做“懒加载”.它一般分为两种情况，一种是懒加载（或者说是异步加载）模块，另一种是异步加载组件。</p>
<h2 id="懒加载模块"><a href="#懒加载模块" class="headerlink" title="懒加载模块"></a>懒加载模块</h2><p>这里使用一个在开发中常用的模块<code>Moment.js</code>，它是一个JavaScript日期处理类库，使用前需要先进行安装，这里使用<code>yarn</code>来进行安装。</p>
<p><code>yarn add momnet</code></p>
<p>然后在pages文件夹下，新建立一个time.js文件，并使用刚才的moment库来格式化时间，代码如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;useState&#125; from <span class="string">&#x27;react&#x27;</span></span><br><span class="line">import moment from <span class="string">&#x27;moment&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Time</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">    const [nowTime,setTime] = useState(Date.now())</span><br><span class="line"></span><br><span class="line">    const changeTime=()=&gt;&#123;</span><br><span class="line">        setTime(moment(Date.now()).format())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;div&gt;显示时间为:&#123;nowTime&#125;&lt;/div&gt;</span><br><span class="line">            &lt;div&gt;&lt;button onClick=&#123;changeTime&#125;&gt;改变时间格式&lt;/button&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default Time</span><br></pre></td></tr></table></figure>

<p>这个看起来很简单和清晰的案例，缺存在着一个潜在的风险，就是如何有半数以上页面使用了这个momnet的库，那它就会以公共库的形式进行打包发布，就算项目第一个页面不使用moment也会进行加载，这就是资源浪费，对于我这样有代码洁癖的良好程序员是绝对不允许的。下面我们就通过Lazy Loading来进行改造代码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;useState&#125; from <span class="string">&#x27;react&#x27;</span></span><br><span class="line">//删除import moment</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Time</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">    const [nowTime,setTime] = useState(Date.now())</span><br><span class="line"></span><br><span class="line">    const changeTime= async ()=&gt;&#123; //把方法变成异步模式</span><br><span class="line">        const moment = await import(<span class="string">&#x27;moment&#x27;</span>) //等待moment加载完成</span><br><span class="line">        setTime(moment.default(Date.now()).format()) //注意使用defalut</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;div&gt;显示时间为:&#123;nowTime&#125;&lt;/div&gt;</span><br><span class="line">            &lt;div&gt;&lt;button onClick=&#123;changeTime&#125;&gt;改变时间格式&lt;/button&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default Time</span><br></pre></td></tr></table></figure>

<p>这时候就就是懒加载了，可以在浏览器中按F12，看一下Network标签，当我们点击按钮时，才会加载1.js,它就是momnet.js的内容。</p>
<h2 id="懒加载自定义组件"><a href="#懒加载自定义组件" class="headerlink" title="懒加载自定义组件"></a>懒加载自定义组件</h2><p>懒加载组件也是非常容易的，我们先来写一个最简单的组件，在components文件夹下建立一个one.js文件，然后编写如下代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> default ()=&gt;&lt;div&gt;Lazy Loading Component&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>有了自定义组件后，先要在懒加载这个组件的文件中引入dynamic,我们这个就在上边新建的time.js文件中编写了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import dynamic from <span class="string">&#x27;next/dynamic&#x27;</span></span><br></pre></td></tr></table></figure>
<p>引入后就可以懒加载自定义模块了，代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;useState&#125; from <span class="string">&#x27;react&#x27;</span></span><br><span class="line">import dynamic from <span class="string">&#x27;next/dynamic&#x27;</span></span><br><span class="line"></span><br><span class="line">const One = dynamic(import(<span class="string">&#x27;../components/one&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Time</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">    const [nowTime,setTime] = useState(Date.now())</span><br><span class="line"></span><br><span class="line">    const changeTime= async ()=&gt;&#123;</span><br><span class="line">        const moment = await import(<span class="string">&#x27;moment&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        setTime(moment.default(Date.now()).format())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;div&gt;显示时间为:&#123;nowTime&#125;&lt;/div&gt;</span><br><span class="line">            &lt;One/&gt;</span><br><span class="line">            &lt;div&gt;&lt;button onClick=&#123;changeTime&#125;&gt;改变时间格式&lt;/button&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default Time</span><br></pre></td></tr></table></figure>

<p>写完代码后，可以看到自定义组件是懒加载的，只有在jsx里用到<code>&lt;One/&gt;</code>时，才会被加载进来，如果不使用就不会被加载。</p>
<p>当我们作的应用存在首页打开过慢和某个页面加载过慢时，就可以采用Lazy Loading的形式，用懒加载解决这些问题。</p>
<h1 id="自定义Head-更加友好的SEO操作"><a href="#自定义Head-更加友好的SEO操作" class="headerlink" title="自定义Head 更加友好的SEO操作"></a>自定义Head 更加友好的SEO操作</h1><p>既然用了Next.js框架，你就是希望服务端渲染，进行SEO操作。那为了更好的进行SEO优化，可以自己定制<code>&lt;Head&gt;</code>标签，定义<code>&lt;Head&gt;</code>一般有两种方式，这节课都学习一下。</p>
<h2 id="方法1：在各个页面加上-lt-Head-gt-标签"><a href="#方法1：在各个页面加上-lt-Head-gt-标签" class="headerlink" title="方法1：在各个页面加上&lt;Head&gt;标签"></a>方法1：在各个页面加上<code>&lt;Head&gt;</code>标签</h2><p>先在/pages文件夹下面建立一个header.js文件，然后写一个最简单的Hooks页面，代码如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Header</span></span>()&#123; </span><br><span class="line">    <span class="built_in">return</span> (&lt;div&gt;litterWang.com&lt;/div&gt;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default Header</span><br></pre></td></tr></table></figure>

<p>写完后到浏览器中预览一下，可以发现title部分并没有任何内容，显示的是<code>localhost:3000/header</code>,接下来就自定义下<code>&lt;Head&gt;</code>。自定义需要先进行引入next/head。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import Head from <span class="string">&#x27;next/head&#x27;</span></span><br><span class="line">引入后你就可以写一些列的头部标签了，全部代码如下:</span><br><span class="line"></span><br><span class="line">import Head from <span class="string">&#x27;next/head&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Header</span></span>()&#123; </span><br><span class="line">    <span class="built_in">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;Head&gt;</span><br><span class="line">                &lt;title&gt;litterWang是最胖的！&lt;/title&gt;</span><br><span class="line">                &lt;meta charSet=<span class="string">&#x27;utf-8&#x27;</span> /&gt;</span><br><span class="line">            &lt;/Head&gt;</span><br><span class="line">            &lt;div&gt;litterWang.com&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/&gt; </span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default Header</span><br></pre></td></tr></table></figure>

<p>这时候再打开浏览器预览，你发现已经有了title。</p>
<h2 id="方法2：定义全局的"><a href="#方法2：定义全局的" class="headerlink" title="方法2：定义全局的"></a>方法2：定义全局的<Head></h2><p>这种方法相当于自定义了一个组件，然后把<Head>在组件里定义好，以后每个页面都使用这个组件,其实这种方法用处不大，也不灵活。因为Next.js已经把<code>&lt;Head&gt;</code>封装好了，本身就是一个组件，我们再次封装的意义不大。</p>
<p>比如在components文件夹下面新建立一个myheader.js,然后写入下面的代码:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import Head from <span class="string">&#x27;next/head&#x27;</span></span><br><span class="line"></span><br><span class="line">const MyHeader = ()=&gt;&#123;</span><br><span class="line">    <span class="built_in">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;Head&gt;</span><br><span class="line">                &lt;title&gt; litterWang.com &lt;/title&gt;   </span><br><span class="line">            &lt;/Head&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default MyHeader</span><br></pre></td></tr></table></figure>

<p>这时候把刚才编写的header.js页面改写一下，引入自定义的myheader，在页面里进行使用，最后在浏览器中预览，也是可以得到title的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import Myheader from <span class="string">&#x27;../components/myheader&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Header</span></span>()&#123; </span><br><span class="line">    <span class="built_in">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;Myheader /&gt;</span><br><span class="line">            &lt;div&gt;litterWang.com&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/&gt; </span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default Header</span><br></pre></td></tr></table></figure>

<p>这节课讲解了一下Next.js的<code>&lt;Head&gt;</code>标签如何使用和自定义，这个在工作中的每个页面都会用到，所以你一定要学会哦。</p>
<h1 id="p11：Next-js框架下使用Ant-Design-UI"><a href="#p11：Next-js框架下使用Ant-Design-UI" class="headerlink" title="p11：Next.js框架下使用Ant Design UI"></a>p11：Next.js框架下使用Ant Design UI</h1><p>在Next.js框架下使用 Ant Design，是最近小伙伴们问我最多的一个问题，所以决定单独拿出一节课来讲一下。Ant Design是一款阿里开源的前端组件库，我在工作中也一直在使用，我觉的它是目前阿里开源的前端项目是最成功的,使用人数也是最多的一个。不过它的初心是用来搭建项目的中后台系统，比如后台的管理系统。从React的角度来讲，它就是一个组件库，里边封装了开发中最常用的一些组件，让我们可以通过简单的配置就可以使用他们。</p>
<h2 id="让Next-js支持CSS文件"><a href="#让Next-js支持CSS文件" class="headerlink" title="让Next.js支持CSS文件"></a>让Next.js支持CSS文件</h2><p>Next.js默认是不支持CSS文件的，它用的是style jsx，也就是说它是不支持直接用import进行引入css的。</p>
<p>比如在根目录下新建一个文件夹static（其实正常情况下你应该已经有这个文件了），然后在文件夹下建立一个test.css文件，写入一些CSS Style。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">body&#123;</span><br><span class="line">    color:green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后用import在header.js里引入。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import <span class="string">&#x27;../static/test.css&#x27;</span></span><br></pre></td></tr></table></figure>

<p>写完这些后到浏览器中进行预览，没有任何输出结果而且报错了。这说明Next.js默认是不支持CSS样式引入的，要进行一些必要的设置，才可以完成。</p>
<p>开始进行配置，让Next.js支持CSS文件</p>
<p>先用yarn命令来安装@zeit/next-css包，它的主要功能就是让Next.js可以加载CSS文件，有了这个包才可以进行配置。</p>
<p><code>yarn add @zeit/next-css</code></p>
<p>包安装好以后就可以进行配置文件的编写了，建立一个next.config.js.这个就是Next.js的总配置文件（如果感兴趣可以自学一下）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const withCss = require(<span class="string">&#x27;@zeit/next-css&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(typeof require !== <span class="string">&#x27;undefined&#x27;</span>)&#123;</span><br><span class="line">    require.extensions[<span class="string">&#x27;.css&#x27;</span>]=file=&gt;&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = withCss(&#123;&#125;)</span><br></pre></td></tr></table></figure>


<p>修改配置文件需要重新启一下服务，重启服务可以让配置生效，这时候你到浏览器中可以发现CSS文件已经生效了，字变成了绿色。</p>
<h2 id="按需加载Ant-Design"><a href="#按需加载Ant-Design" class="headerlink" title="按需加载Ant Design"></a>按需加载Ant Design</h2><p>加载Ant Design在我们打包的时候会把Ant Design的所有包都打包进来，这样就会产生性能问题，让项目加载变的非常慢。这肯定是不行的，现在的目的是只加载项目中用到的模块，这就需要我们用到一个babel-plugin-import文件。</p>
<h2 id="先来安装Ant-Design库"><a href="#先来安装Ant-Design库" class="headerlink" title="** 先来安装Ant Design库 **"></a>** 先来安装Ant Design库 **</h2><p>直接使用yarn来安装就可以。</p>
<p><code>yarn add antd</code></p>
<h2 id="安装和配置babel-plugin-import-插件"><a href="#安装和配置babel-plugin-import-插件" class="headerlink" title="** 安装和配置babel-plugin-import 插件 **"></a>** 安装和配置babel-plugin-import 插件 **</h2><p>其实babel-plugin-import我讲Vue.js和Webpack.js的时候都一次讲过这个插件，这里我们就再来讲一下，先进行安装。</p>
<p><code>yarn add babel-plugin-import</code><br>安装完成后，在项目根目录建立.babelrc文件，然后写入如下配置文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;presets&quot;</span>:[<span class="string">&quot;next/babel&quot;</span>],  //Next.js的总配置文件，相当于继承了它本身的所有配置</span><br><span class="line">    <span class="string">&quot;plugins&quot;</span>:[     //增加新的插件，这个插件就是让antd可以按需引入，包括CSS</span><br><span class="line">        [</span><br><span class="line">            <span class="string">&quot;import&quot;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;libraryName&quot;</span>:<span class="string">&quot;antd&quot;</span>,</span><br><span class="line">                <span class="string">&quot;style&quot;</span>:<span class="string">&quot;css&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样配置好了以后，webpack就不会默认把整个Ant Design的包都进行打包到生产环境了，而是我们使用那个组件就打包那个组件,同样CSS也是按需打包的。</p>
<p>通过上面的配置，就可以愉快的在Next.js中使用Ant Desgin，让页面变的好看起来。</p>
<p>可以在header.js里，引入<Button>组件，并进行使用，代码如下。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import Myheader from <span class="string">&#x27;../components/myheader&#x27;</span></span><br><span class="line">import &#123;Button&#125; from <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import <span class="string">&#x27;../static/test.css&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">Header</span></span>()&#123; </span><br><span class="line">    <span class="built_in">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;Myheader /&gt;</span><br><span class="line">            &lt;div&gt;litterWang.com&lt;/div&gt;</span><br><span class="line">            &lt;div&gt;&lt;Button&gt;我是按钮&lt;/Button&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/&gt; </span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">export</span> default Header</span><br></pre></td></tr></table></figure>

<p>然后到浏览器中查看一下结果，这时候Ant Design已经起作用了，我们也完成了在Next.js中，使用Ant Design的目的。</p>
<h1 id="Next-js生产环境打包（完结）"><a href="#Next-js生产环境打包（完结）" class="headerlink" title="Next.js生产环境打包（完结）"></a>Next.js生产环境打包（完结）</h1><p>如何进行打包和打包中的一些坑。</p>
<p>其实Next.js大打包时非常简单的，只要一个命令就可以打包成功。但是当你使用了Ant Desgin后，在打包的时候会遇到一些坑。</p>
<p>打包 ：next build</p>
<p>运行：next start -p 80</p>
<p>先把这两个命令配置到package.json文件里，比如配置成下面的样子。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;next dev&quot;</span>,</span><br><span class="line">  <span class="string">&quot;build&quot;</span>: <span class="string">&quot;next build&quot;</span>,</span><br><span class="line">  <span class="string">&quot;start&quot;</span>: <span class="string">&quot;next start -p 80&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>然后在终端里运行一下<code>yarn build</code>，如果这时候报错，其实是我们在加入Ant Design的样式时产生的，这个已经在Ant Design的Github上被提出了，但目前还没有被修改，你可以改完全局引入CSS解决问题。</p>
<p>在page目录下，新建一个_app.js文件，然后写入下面的代码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import App from <span class="string">&#x27;next/app&#x27;</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&#x27;antd/dist/antd.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> default App</span><br></pre></td></tr></table></figure>
<p>这样配置一下，就可以打包成功了，然后再运行yarn start来运行服务器，看一下我们的header页面，也是有样式的。说明打包已经成功了。</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">王美</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://hard-workingrookie.github.io/2020/08/27/next-js%E5%85%A5%E9%97%A8/">https://hard-workingrookie.github.io/2020/08/27/next-js%E5%85%A5%E9%97%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://hard-workingrookie.github.io" target="_blank">王美的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/react/">react</a><a class="post-meta__tags" href="/tags/Next-js/">Next.js</a></div><div class="post_share"><div class="social-share" data-image="https://static.oschina.net/uploads/space/2016/1125/144806_W1dc_2720166.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="/img/wechat.jpg"/></a><div class="post-qr-code-desc"></div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="/img/alipay.jpg"/></a><div class="post-qr-code-desc"></div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/09/04/vuex%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><img class="prev-cover" data-lazy-src="https://upload-images.jianshu.io/upload_images/14228341-5ce7cf30fb77567f.jpg?imageMogr2/auto-orient/strip|imageView2/2/w/400/format/webp" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Vuex学习笔记</div></div></a></div><div class="next-post pull-right"><a href="/2020/08/27/%E7%AC%94%E8%AE%B0/"><img class="next-cover" data-lazy-src="https://s1.ax1x.com/2020/08/28/dIwq9f.md.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">笔记</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/08/26/react-hook学习/" title="使用React Hooks构建电影搜索应用程序"><img class="relatedPosts_cover" data-lazy-src="https://www.runoob.com/wp-content/uploads/2016/02/react.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-26</div><div class="relatedPosts_title">使用React Hooks构建电影搜索应用程序</div></div></a></div><div class="relatedPosts_item"><a href="/2020/08/27/react-redux入门级学习/" title="react-redux入门级学习"><img class="relatedPosts_cover" data-lazy-src="https://www.runoob.com/wp-content/uploads/2016/02/react.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-27</div><div class="relatedPosts_title">react-redux入门级学习</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></article></main><footer id="footer" style="background-image: url(https://static.oschina.net/uploads/space/2016/1125/144806_W1dc_2720166.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By 王美</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi,  welcome  to  my  <a  href="https://hard-workingrookie.github.io/">blog</a>!</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    window.valine = new Valine({
      el: '#vcomment',
      appId: '',
      appKey: '',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'en',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
    });
    if ('nick,mail') { valine.config.requiredFields= 'nick,mail'.split(',') }
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/js/third-party/click_heart.js" async="async"></script></div></body></html>